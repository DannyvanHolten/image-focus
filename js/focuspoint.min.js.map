{"version":3,"sources":["app/image-focus.js","app/models/model.attachment.js","app/models/model.focusinterface.js","app/views/view.attachment.js","app/views/view.cropbutton.js","app/views/view.focusinterface.js","app/views/view.imagefocus.js"],"names":["$","window","IFA","Models","Collections","Views","css","_imageFocus","imageFocus","_wrapper","_img","_point","_clickarea","_button","button","_primary","_disabled","document","on","ImageFocus","jQuery","Attachment","Backbone","Model","extend","url","ajaxurl","apiArgs","id","defaults","src","width","height","offset","x","y","focusPointOrigin","focusPoint","differState","ajaxState","$img","initialize","options","self","this","fetchAttachmentData","setDifferState","resetAjaxState","fetch","data","param","success","collection","validateFocusPoint","set","error","console","log","response","origin","get","once","model","hasOwnProperty","FocusInterface","radius","position","clickPosition","state","init","move","active","hover","setState","attributes","_","View","bind","updateDimensions","$attachment","left","top","Cropbutton","$cropButton","properties","cropButton","focusPointL10n","$el","append","save","differStateHandler","ajaxStateHandler","highlight","disable","setButtonText","cropButtonProgress","cropButtonSuccess","cropButtonFailed","activate","$input","text","removeClass","addClass","template","imgHtml","$imageFocus","$container","$clickarea","$focusPoint","attachment","wp","outerHTML","wrap","find","render","updateFocusPoint","updateDimensionData","events","html","imageObject","setElements","setEvents","event","which","startMove","toggleHoverState","reset","updateClickPosition","mouse","pageX","pageY","imageWidth","imageHeight","helper","calc","maxRange","pos","backgroundImage","backgroundSize","backgroundPosition","axe","toggleClass","input","min","max","output","setInterval","$attachmentDetails","length","each","$this","startApplication","$object","$detailsImage","focusInterface","el"],"mappings":"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","file":"focuspoint.min.js"}